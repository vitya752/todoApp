(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{129:function(e,t,a){e.exports=a(309)},230:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){},263:function(e,t){},266:function(e,t,a){},267:function(e,t,a){},268:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},304:function(e,t,a){},305:function(e,t,a){},306:function(e,t,a){},308:function(e,t,a){},309:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(19),c=a.n(s),i=a(6),l=a(21),u=a(121),o=a(313),d=a(5),m=a(2),g=a.n(m),p=a(34),f=a(4),E=a(10),v=a(11),h=a.n(v),b=function(){var e="/api/auth";return{login:function(t,a){return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(h.a.post("".concat(e,"/login"),{email:t,password:a}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}))},register:function(t,a){return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(h.a.post("".concat(e,"/register"),{email:t,password:a}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}))},check:function(t){return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.awrap(h.a.post("".concat(e,"/check"),{token:t}));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))}}},N=function(e){var t="/api/note",a=h.a.create({headers:{Authorization:"Bearer ".concat(e)}});return{getNotes:function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.awrap(a.get("".concat(t)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}))},addNote:function(e){return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(a.post("".concat(t,"/add"),{text:e}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}))},updateNote:function(e,n,r){return g.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,g.a.awrap(a.patch("".concat(t,"/update"),{id:e,important:n,done:r}));case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}}))},deleteNote:function(e){return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(a.post("".concat(t,"/delete"),{id:e}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}))}}},S=function(e){var t="/api/settings",a=h.a.create({headers:{Authorization:"Bearer ".concat(e)}});return{setSettings:function(e,n){return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(a.patch(t,{nickname:e,avatar:n}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}))},deleteAcc:function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.awrap(a.delete(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}))}}},_=function(e){var t="/api/dialogs",a=h.a.create({headers:{Authorization:"Bearer ".concat(e)}});return{getDialogs:function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.awrap(a.get("".concat(t)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}))},createDialog:function(e,n){return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(a.post("".concat(t),{partnerId:e,text:n}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}))}}},w=function(e){var t="/api/messages",a=h.a.create({headers:{Authorization:"Bearer ".concat(e)}});return{getMessages:function(e){return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(a.get("".concat(t,"/").concat(e)));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}))},sendMessage:function(e,n){return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(a.post("".concat(t),{dialogId:e,text:n}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}))}}},O=function(e){var t=h.a.create({headers:{Authorization:"Bearer ".concat(e)}});return{findUsers:function(e){return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.awrap(t.post("".concat("/api/find"),{reqEmail:e}));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))}}},k=function(e,t,a){a(e),Object(E.b)(t.response.data.message)},T=function(){return{saveUser:function(e){localStorage.setItem("user",JSON.stringify(e))},getUser:function(){return JSON.parse(localStorage.getItem("user"))},deleteUser:function(){localStorage.removeItem("user")}}},A={userId:null,token:null,email:null,nickname:null,avatar:null,isAuth:!1,fetching:!1,form:{email:"",pass:""}},I=function(e){return{type:"FETCHING",fetching:e}},x=function(e){var t=e.userId,a=void 0===t?null:t,n=e.nickname,r=void 0===n?null:n,s=e.avatar,c=void 0===s?null:s,i=e.email,l=void 0===i?null:i,u=e.token;return{type:"SET_AUTH",userId:a,token:void 0===u?null:u,nickname:r,avatar:c,email:l}},y=function(e,t){return{type:"SET_FIELD_AUTH_FORM",payload:Object(p.a)({},e,t)}},C=function(e,t){return{type:"SET_SETTINGS",payload:Object(p.a)({},e,t)}},j=function(e,t){return function(a){var n,r,s,c,i,l,u,o,d;return g.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,a(I(!0)),n=b(),m.next=5,g.a.awrap(n.login(e,t));case 5:"OK"===(r=m.sent).statusText&&(s=r.data,c=s.userId,i=s.email,l=s.nickname,u=s.avatar,o=s.token,d=s.message,T().saveUser(r.data),a(x({userId:c,nickname:l,avatar:u,email:i,token:o})),a(I(!1)),a({type:"CLEAR_AUTH_FORM"}),Object(E.b)(d)),m.next=12;break;case 9:m.prev=9,m.t0=m.catch(0),k(I(!1),m.t0,a);case 12:case"end":return m.stop()}}),null,null,[[0,9]])}},D=function(e,t){return function(a){var n,r;return g.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,a(I(!0)),n=b(),s.next=5,g.a.awrap(n.register(e,t));case 5:"Created"===(r=s.sent).statusText&&(Object(E.b)(r.data.message),a(I(!1))),s.next=12;break;case 9:s.prev=9,s.t0=s.catch(0),k(I(!1),s.t0,a);case 12:case"end":return s.stop()}}),null,null,[[0,9]])}},U=function(e){var t=e.token;return function(e){var a,n,r;return g.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,e(I(!0)),a=S(t),s.next=5,g.a.awrap(a.deleteAcc());case 5:"Accepted"===(n=s.sent).statusText&&(r=n.data.message,Object(E.b)(r),e(I(!1)),e(x({})),e(y("email","")),e(y("pass","")),T().deleteUser()),s.next=12;break;case 9:s.prev=9,s.t0=s.catch(0),k(I(!1),s.t0,e);case 12:case"end":return s.stop()}}),null,null,[[0,9]])}},M=function(e){var t=e.token,a=e.nickname,n=e.avatar;return function(e){var r,s,c;return g.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,e(I(!0)),r=S(t),i.next=5,g.a.awrap(r.setSettings(a,n));case 5:"Accepted"===(s=i.sent).statusText&&(c=s.data.message,e(I(!1)),Object(E.b)(c)),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(0),k(I(!1),i.t0,e);case 12:case"end":return i.stop()}}),null,null,[[0,9]])}},F=function(){return function(e){var t,a,n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,t=T(),!(a=t.getUser())||!a.token){r.next=11;break}return n=b(),r.next=7,g.a.awrap(n.check(a.token));case 7:"Accepted"===r.sent.statusText?e(x(a)):t.deleteUser(),r.next=12;break;case 11:e(x({}));case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(0),k(I(!1),r.t0,e);case 17:case"end":return r.stop()}}),null,null,[[0,14]])}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHING":return Object(f.a)({},e,{fetching:t.fetching});case"SET_AUTH":return Object(f.a)({},e,{userId:t.userId,token:t.token,email:t.email,nickname:t.nickname,avatar:t.avatar,isAuth:!!t.token});case"SET_FIELD_AUTH_FORM":return Object(f.a)({},e,{form:Object(f.a)({},e.form,{},t.payload)});case"CLEAR_AUTH_FORM":return Object(f.a)({},e,{form:{email:"",pass:""}});case"SET_SETTINGS":return Object(f.a)({},e,{},t.payload);default:return e}},G=a(12),P={fetching:!1,sending:!1,notes:[],newNote:"",search:"",activeFilter:"all"},R=function(e){return{type:"FETCHING",fetching:e}},H=function(e){return{type:"SENDING",sending:e}},W=function(e){return{type:"SET_NEW_NOTE",newNote:e}},q=function(e,t){return{type:"UPDATE_NOTE",note:e,noteId:t}},B=function(e){return{type:"SET_SEARCH",search:e}},z=function(e){return{type:"SET_FILTER",newFilter:e}},V=function(e){return function(t){var a,n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t(R(!0)),a=N(e),r.next=5,g.a.awrap(a.getNotes());case 5:"OK"===(n=r.sent).statusText?(t(R(!1)),t({type:"SET_NOTES",notes:n.data.notes}),Object(E.b)(n.data.message)):Object(E.b)("\u041e\u0448\u0438\u0431\u043a\u0430!"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),k(R(!1),r.t0,t);case 12:case"end":return r.stop()}}),null,null,[[0,9]])}},J=function(e,t){return function(a){var n,r;return g.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,a(H(!0)),n=N(e),s.next=5,g.a.awrap(n.addNote(t));case 5:"Created"===(r=s.sent).statusText?(a(V(e)),a(W("")),a(H(!1)),Object(E.b)(r.data.message)):Object(E.b)("\u041e\u0448\u0438\u0431\u043a\u0430!"),s.next=12;break;case 9:s.prev=9,s.t0=s.catch(0),k(H(!1),s.t0,a);case 12:case"end":return s.stop()}}),null,null,[[0,9]])}},Y=function(e,t,a,n){return function(r){var s,c;return g.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,r(H(!0)),s=N(e),i.next=5,g.a.awrap(s.updateNote(t,a,n));case 5:"Accepted"===(c=i.sent).statusText?(r(q(c.data.note,t)),r(H(!1)),Object(E.b)(c.data.message)):Object(E.b)("\u041e\u0448\u0438\u0431\u043a\u0430!"),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(0),k(H(!1),i.t0,r);case 12:case"end":return i.stop()}}),null,null,[[0,9]])}},K=function(e,t){return function(a){var n,r;return g.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,a(H(!0)),n=N(e),s.next=5,g.a.awrap(n.deleteNote(t));case 5:r=s.sent,console.log(r),"Accepted"===r.statusText?(a(q(null,t)),a(H(!1)),Object(E.b)(r.data.message)):Object(E.b)("\u041e\u0448\u0438\u0431\u043a\u0430!"),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(0),k(H(!1),s.t0,a);case 13:case"end":return s.stop()}}),null,null,[[0,10]])}},Q=function(e,t,a){var n=e.notes.findIndex((function(e){return e._id===a}));if(-1!==n)return null!==t?Object(f.a)({},e,{notes:[].concat(Object(G.a)(e.notes.slice(0,n)),[t],Object(G.a)(e.notes.slice(n+1)))}):Object(f.a)({},e,{notes:[].concat(Object(G.a)(e.notes.slice(0,n)),Object(G.a)(e.notes.slice(n+1)))})},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHING":return Object(f.a)({},e,{fetching:t.fetching});case"SET_NOTES":return Object(f.a)({},e,{notes:t.notes});case"SENDING":return Object(f.a)({},e,{sending:t.sending});case"SET_NEW_NOTE":return Object(f.a)({},e,{newNote:t.newNote});case"UPDATE_NOTE":return Q(e,t.note,t.noteId);case"SET_SEARCH":return Object(f.a)({},e,{search:t.search});case"SET_FILTER":return Object(f.a)({},e,{activeFilter:t.newFilter});default:return e}},Z={openOnlineUsers:!1,messageField:"",onlineUsers:[],messages:[]},$=function(e){var t=new Date;return e.date="".concat(t.getHours(),":").concat(t.getMinutes()),{type:"PUSH_MESSAGE",message:e}},ee=function(){return{type:"CLEAR_MESSAGES"}},te=function(){return{type:"SET_OPEN_ONLINE_USERS"}},ae=function(e){return{type:"SET_ONLINE_USERS",onlineUsers:e}},ne=function(e){return{type:"DELETE_USER",id:e}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE":return Object(f.a)({},e,{messageField:t.messageField});case"PUSH_MESSAGE":return Object(f.a)({},e,{messages:[].concat(Object(G.a)(e.messages),[t.message])});case"CLEAR_MESSAGES":return Object(f.a)({},e,{messages:[]});case"SET_OPEN_ONLINE_USERS":return Object(f.a)({},e,{openOnlineUsers:!e.openOnlineUsers});case"SET_ONLINE_USERS":return Object(f.a)({},e,{onlineUsers:t.onlineUsers});case"DELETE_USER":var a=e.onlineUsers.findIndex((function(e){return e._id===t.id}));return-1!==a?Object(f.a)({},e,{onlineUsers:[].concat(Object(G.a)(e.onlineUsers.slice(0,a)),Object(G.a)(e.onlineUsers.slice(a+1)))}):e;default:return e}},se=function(e){var t=e.dateFromBase,a=e.type,n=new Date,r=new Date(t),s=(n.getDate()+"").padStart(2,"0"),c=(r.getDate()+"").padStart(2,"0"),i=(n.getMonth()+1+"").padStart(2,"0"),l=(r.getMonth()+1+"").padStart(2,"0"),u=n.getFullYear(),o=r.getFullYear(),d=(r.getHours()+"").padStart(2,"0"),m=(r.getMinutes()+"").padStart(2,"0"),g=function(){switch(a){case"dialogs":return"".concat(c,".").concat(l,".").concat(o);case"messages":default:return"".concat(c,".").concat(l,".").concat(o," - ").concat(d,":").concat(m)}};return s!==c?s-c===1&&i===l&&u===o?"dialogs"===a?"\u0412\u0447\u0435\u0440\u0430":"\u0412\u0447\u0435\u0440\u0430 - ".concat(d,":").concat(m):g():i!==l||u!==o?g():"".concat(d,":").concat(m)},ce=function(e){var t=e.dialogs,a=e.userId;return t.map((function(e){return ie(e,a)})).sort((function(e,t){return new Date(t.fullDate)-new Date(e.fullDate)}))},ie=function(e,t){var a;a=e.partner._id===t?e.author:e.partner;var n=new Date-new Date(a.lastSeen)<3e5;return{id:e._id,avatar:a.avatar,email:a.email,text:e.lastMessage.text,fullDate:e.lastMessage.createdAt,date:se({dateFromBase:e.lastMessage.createdAt,type:"dialogs"}),my:e.lastMessage.author===t,unreadMessages:e.unreadMessages,isOnline:n,participants:{author:e.author,partner:e.partner}}},le=function(e){var t=e.messages,a=e.participants;return t.map((function(e){return ue(e,a)}))},ue=function(e,t){var a;return{senderId:(a=t.author._id===e.author?t.author:t.partner)._id,avatar:a.avatar,author:a.nickname||a.email,text:e.text,fullDate:e.createdAt,date:se({dateFromBase:e.createdAt,type:"messages"})}},oe={loading:!1,viewSearchWindow:!1,searchField:"",selectedNewId:null,firstMessage:"",selectedDialog:null,dialogs:[],foundUsers:[],messages:[],isTyping:{status:!1,writersName:""}},de=function(e){return{type:"SET_LOADING",loading:e}},me=function(e){return{type:"SET_VIEW_SEARCH_WINDOW",viewSearchWindow:e}},ge=function(e){return{type:"SET_SEARCH_FIELD",searchField:e}},pe=function(e){return{type:"SET_CHECKED_NEW_ID",selectedNewId:e}},fe=function(e){return{type:"SET_FIRST_MESSAGE",firstMessage:e}},Ee=function(e){return{type:"SET_SELECTED_DIALOG",selectedDialog:e}},ve=function(e){return{type:"SET_FOUND_USERS",foundUsers:e}},he=function(e){return{type:"SET_MESSAGES",messages:e}},be=function(e){return{type:"UPDATE_READSTATUS",payload:e}},Ne=function(e){return{type:"SET_IS_TYPING",isTyping:e}},Se=function(e,t,a,n){return function(t){var r;return g.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,t(de(!0)),r=_(e),s.next=5,g.a.awrap(r.createDialog(a,n));case 5:t(de(!1)),t(me(!1)),t(pe("")),t(ge("")),t(fe("")),t(ve([])),s.next=16;break;case 13:s.prev=13,s.t0=s.catch(0),k(de(!1),s.t0,t);case 16:case"end":return s.stop()}}),null,null,[[0,13]])}},_e=function(e,t){return function(a){var n,r,s;return g.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,a(de(!0)),n=_(e),c.next=5,g.a.awrap(n.getDialogs());case 5:r=c.sent,s=ce({dialogs:r.data.dialogs,userId:t}),a({type:"SET_DIALOGS",dialogs:s}),a(de(!1)),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),k(de(!1),c.t0,a);case 14:case"end":return c.stop()}}),null,null,[[0,11]])}},we=function(e,t,a){return function(n){var r,s,c;return g.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,n(de(!0)),n(he([])),r=w(e),i.next=6,g.a.awrap(r.getMessages(t));case 6:s=i.sent,c=le({messages:s.data.messages,participants:a}),n(he(c)),n(de(!1)),i.next=15;break;case 12:i.prev=12,i.t0=i.catch(0),k(de(!1),i.t0,n);case 15:case"end":return i.stop()}}),null,null,[[0,12]])}},Oe=function(e,t,a,n){return function(n){var r;return g.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,r=w(e),s.next=4,g.a.awrap(r.sendMessage(t,a));case 4:s.next=9;break;case 6:s.prev=6,s.t0=s.catch(0),k(de(!1),s.t0,n);case 9:case"end":return s.stop()}}),null,null,[[0,6]])}},ke=function(e,t){return function(a){try{var n=e.dialogId,r=e.text,s=e.date,c=e.partnerId,i={id:n,text:r,fulldate:s,my:t!==c,date:se({dateFromBase:s,type:"dialogs"})};t!==c&&(i.unreadMessages=1),a({type:"UPDATE_DIALOG",dialog:i})}catch(l){k(de(!1),l,a)}}},Te=function(e){return function(t){try{var a=e.date,n=Object(f.a)({},e,{fullDate:a,date:se({dateFromBase:a,type:"messages"})});t({type:"PUSH_TO_MESSAGES",message:n})}catch(r){k(de(!1),r,t)}}},Ae=function(e,t){return function(a){var n,r,s;return g.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,a(ve([])),a(de(!0)),n=O(e),c.next=6,g.a.awrap(n.findUsers(t.toLowerCase()));case 6:r=c.sent,i={foundUsers:r.data.foundUsers},s=i.foundUsers.map((function(e){return{partnerId:e._id,avatar:e.avatar,email:e.email}})),a(ve(s)),a(de(!1)),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(0),k(de(!1),c.t0,a);case 15:case"end":return c.stop()}var i}),null,null,[[0,12]])}},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING":return Object(f.a)({},e,{loading:t.loading});case"SET_VIEW_SEARCH_WINDOW":return Object(f.a)({},e,{viewSearchWindow:t.viewSearchWindow});case"SET_SEARCH_FIELD":return Object(f.a)({},e,{searchField:t.searchField});case"SET_CHECKED_NEW_ID":return Object(f.a)({},e,{selectedNewId:t.selectedNewId});case"SET_FIRST_MESSAGE":return Object(f.a)({},e,{firstMessage:t.firstMessage});case"SET_SELECTED_DIALOG":return Object(f.a)({},e,{selectedDialog:t.selectedDialog});case"SET_DIALOGS":return Object(f.a)({},e,{dialogs:t.dialogs});case"UPDATE_DIALOG":var a=e.dialogs.findIndex((function(e){return e.id===t.dialog.id})),n=Object(f.a)({},e.dialogs[a],{},t.dialog,{unreadMessages:e.dialogs[a].unreadMessages+1});return-1!==a?Object(f.a)({},e,{dialogs:[n].concat(Object(G.a)(e.dialogs.slice(0,a)),Object(G.a)(e.dialogs.slice(a+1)))}):e;case"SET_FOUND_USERS":return Object(f.a)({},e,{foundUsers:t.foundUsers});case"SET_MESSAGES":return Object(f.a)({},e,{messages:t.messages});case"PUSH_TO_MESSAGES":return Object(f.a)({},e,{messages:[].concat(Object(G.a)(e.messages),[t.message])});case"UPDATE_READSTATUS":var r=e.dialogs.findIndex((function(e){return e.id===t.payload})),s=Object(G.a)(e.dialogs);return-1!==r?(s[r].unreadMessages=0,Object(f.a)({},e,{dialogs:s})):e;case"SET_IS_TYPING":return Object(f.a)({},e,{isTyping:{status:t.isTyping.status,writersName:t.isTyping.writersName}});default:return e}},xe=Object(d.c)({auth:L,todoPage:X,chatPage:re,form:o.a,dialogsPage:Ie}),ye=Object(d.d)(xe,Object(d.a)(u.a));window.store=ye;var Ce=ye,je=(a(229),a(94),a(230),a(7)),De=(a(231),function(){return r.a.createElement("div",{className:"lds-css"},r.a.createElement("div",{className:"lds-double-ring"},r.a.createElement("div",null),r.a.createElement("div",null)))}),Ue=(a(232),a(124)),Me=a(52),Fe=function(e){var t=e.text,a=e.handleClick,n=e.sending,s=e.important,c=e.done,i=[{id:1,name:"important",classNames:"btn btn-primary",onClickFunction:a,fontAwesomeIcon:Me.b},{id:2,name:"done",classNames:"btn btn-success btn-done",onClickFunction:a,fontAwesomeIcon:Me.a},{id:3,name:"delete",classNames:"btn btn-danger",onClickFunction:a,fontAwesomeIcon:Me.c}].map((function(e){return r.a.createElement("button",{name:e.name,type:"button",className:e.classNames,key:e.id,onClick:e.onClickFunction,disabled:n},r.a.createElement(Ue.a,{icon:e.fontAwesomeIcon}))}));return r.a.createElement("li",{className:"list-group-item list-group-item--custom ".concat(s&&"important"," ").concat(c&&"doneItem")},t,r.a.createElement("div",{className:"float-right buttons-wrap"},i))},Le=Object(i.b)((function(e){return{token:e.auth.token,sending:e.todoPage.sending}}),(function(e){return Object(d.b)({requestUpdateNoteThunk:Y,requestDeleteNoteThunk:K},e)}))((function(e){var t=e.text,a=e.itemId,n=e.requestUpdateNoteThunk,s=e.requestDeleteNoteThunk,c=e.token,i=e.important,l=e.done,u=e.sending;return r.a.createElement(Fe,{handleClick:function(e){switch(e.target.name){case"important":return n(c,a,!i,l);case"done":return n(c,a,i,!l);case"delete":return s(c,a);default:return n(c,a,i,l)}},sending:u,text:t,important:i,done:l})})),Ge=function(e){var t=e.notes,a=e.fetching;return r.a.createElement("div",{className:"list-container mb-3"},t.length?r.a.createElement("ul",{className:"list-group"},t.map((function(e){var t=e._id,a=e.text,n=e.important,s=e.done;return r.a.createElement(Le,{text:a,important:n,done:s,key:t,itemId:t})}))):a?r.a.createElement("div",{className:"alert alert-primary"},r.a.createElement(De,null)):r.a.createElement("div",{className:"alert alert-warning",role:"alert"},"\u0412\u0430\u0448 \u0441\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u043c\u0435\u0442\u043e\u043a \u043f\u0443\u0441\u0442!"))},Pe=Object(i.b)((function(e){return{token:e.auth.token,notes:e.todoPage.notes,fetching:e.todoPage.fetching,search:e.todoPage.search,activeFilter:e.todoPage.activeFilter}}),(function(e){return Object(d.b)({requestNotesThunk:V},e)}))((function(e){var t=e.notes,a=e.fetching,s=e.requestNotesThunk,c=e.token,i=e.search,l=e.activeFilter;Object(n.useEffect)((function(){s(c)}),[s,c]);var u=function(e){return""===i?e:e.filter((function(e){return e.text.toLowerCase().includes(i.toLowerCase())}))}(function(e){switch(l){case"all":return e;case"active":return e.filter((function(e){return!1===e.done}));case"done":return e.filter((function(e){return!0===e.done}));default:return e}}(t));return r.a.createElement(Ge,{notes:u,fetching:a})})),Re=function(e){var t=e.search,a=e.handleChangeSearch;return r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Search")),r.a.createElement("input",{type:"text",className:"form-control",onChange:a,value:t}))},He=Object(i.b)((function(e){return{search:e.todoPage.search}}),(function(e){return Object(d.b)({setSearchAC:B},e)}))((function(e){var t=e.search,a=e.setSearchAC;return r.a.createElement(Re,{search:t,handleChangeSearch:function(e){a(e.target.value)}})})),We=function(e){var t=e.handleChangeFilter,a=e.activeFilter,n=[{name:"all",label:"All"},{name:"active",label:"Active"},{name:"done",label:"Done"}].map((function(e){var n=e.name,s=e.label,c=a===n;return r.a.createElement("button",{name:n,key:n,className:"btn btn-dark ".concat(c&&"active"),onClick:t},s)}));return r.a.createElement("div",{className:"btn-group mb-3"},n)},qe=Object(i.b)((function(e){return{activeFilter:e.todoPage.activeFilter}}),(function(e){return Object(d.b)({setFilterAC:z},e)}))((function(e){var t=e.setFilterAC,a=e.activeFilter;return r.a.createElement(We,{handleChangeFilter:function(e){a!==e.target.name&&t(e.target.name)},activeFilter:a})})),Be=function(){return r.a.createElement("div",{className:"navigation-panel mt-3 d-flex"},r.a.createElement(He,null),r.a.createElement(qe,null))},ze=function(e){var t=e.caption,a=e.handler,n=e.value,s=e.name,c=e.readonly;return r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},t)),r.a.createElement("input",{type:"text",className:"form-control",onChange:a,value:n,name:s,readOnly:!!c}))},Ve=function(e){var t=e.handleChangeField,a=e.newNote,n=e.sending,s=e.requestAddNoteThunk,c=e.token;return r.a.createElement("div",{className:"d-flex"},r.a.createElement(ze,{caption:"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c",handler:t,value:a,name:"newItem"}),r.a.createElement("button",{type:"submit",className:"btn btn-dark mb-3",disabled:n||!a.length,onClick:function(){return s(c,a)}},"Add"))},Je=Object(i.b)((function(e){return{sending:e.todoPage.sending,newNote:e.todoPage.newNote,token:e.auth.token}}),(function(e){return Object(d.b)({requestAddNoteThunk:J,setNewNoteAC:W},e)}))((function(e){var t=e.token,a=e.sending,n=e.requestAddNoteThunk,s=e.setNewNoteAC,c=e.newNote;return r.a.createElement(Ve,{newNote:c,handleChangeField:function(e){s(e.target.value)},sending:a,token:t,requestAddNoteThunk:n})})),Ye=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Be,null),r.a.createElement(Pe,null),r.a.createElement(Je,null))},Ke=function(e){var t=e.fetching,a=e.login,n=e.register,s=e.setAuthFormAC,c=e.fieldEmail,i=e.fieldPass,l=function(e){s(e.target.name,e.target.value)};return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{id:"email",name:"email",type:"text",className:"form-control",value:c,onChange:l})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"pass"},"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("input",{id:"pass",name:"pass",type:"password",className:"form-control",value:i,onChange:l})),r.a.createElement("button",{type:"button",onClick:a,disabled:t,className:"btn btn-primary mr-3"},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement("button",{onClick:n,disabled:t,className:"btn btn-danger"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))))},Qe=Object(i.b)((function(e){return{fetching:e.auth.fetching,fieldEmail:e.auth.form.email,fieldPass:e.auth.form.pass}}),(function(e){return Object(d.b)({requestLoginThunk:j,requestRegisterThunk:D,setAuthFormAC:y,cheackAuthThunk:F},e)}))((function(e){var t=e.fetching,a=e.requestLoginThunk,s=e.requestRegisterThunk,c=e.cheackAuthThunk,i=e.setAuthFormAC,l=e.fieldEmail,u=e.fieldPass;Object(n.useEffect)((function(){c()}),[c]);return r.a.createElement(Ke,{fetching:t,login:function(){a(l,u)},register:function(){s(l,u)},setAuthFormAC:i,fieldEmail:l,fieldPass:u})})),Xe=function(){return r.a.createElement(Qe,null)},Ze=a(125),$e=a.n(Ze),et=function(){return $e()("http://localhost:5000")},tt=(a(266),a(267),function(e){var t=e.avatar,a=e.small,n=e.alt,s=e.isDialog,c=e.isOnline;return r.a.createElement("div",{className:"avatar-block \n                ".concat(s?"avatar-block_status":"","\n                ").concat(c?"avatar-block_status_online":"","\n                ").concat(a?"avatar-block_small":"","\n            ")},r.a.createElement("img",{src:t||"https://instagram.inoutmkt.com.br/assets/img/no-avatar.png",className:"message-avatar",alt:n||(t||"no-avatar")}))}),at=function(e){var t=e.data,a=t.avatar,n=t.nickname;return r.a.createElement("li",{className:"d-flex align-items-center"},r.a.createElement(tt,{avatar:a,alt:n}),r.a.createElement("span",{className:"nickname"},n))},nt=Object(i.b)((function(e){return{onlineUsers:e.chatPage.onlineUsers,openOnlineUsers:e.chatPage.openOnlineUsers}}),(function(e){return Object(d.b)({setOpenOnlineUsersAC:te},e)}))((function(e){var t=e.onlineUsers,a=e.openOnlineUsers,n=e.setOpenOnlineUsersAC;return r.a.createElement("div",{className:"online-users"},r.a.createElement("span",{className:"online-users__switch",onClick:n},"\u041e\u043d\u043b\u0430\u0439\u043d \u044e\u0437\u0435\u0440\u044b (",t.length,")",r.a.createElement("span",{className:"online-users__switch__status"},a?"-":"+")),r.a.createElement("ul",{className:"online-users__list ".concat(a&&"online-users__list_active")},t?t.map((function(e){return r.a.createElement(at,{key:e._id,data:e.userId})})):""))})),rt=(a(268),function(e){var t=e.item,a=e.userId;return r.a.createElement("div",{className:"message ".concat(a===t.senderId&&"message_my")},r.a.createElement("div",{className:"message__content"},r.a.createElement("div",{className:"message__author"},r.a.createElement(tt,{small:!0,avatar:t.avatar,alt:t.author}),r.a.createElement("span",null,t.author)),r.a.createElement("div",{className:"message__text"},t.text)),r.a.createElement("span",{className:"message_date"},t.date))}),st=function(e){var t=e.type,a=e.children;return r.a.createElement("div",{className:"alert alert-".concat(t)},a)},ct=function(e){var t=e.messages,a=void 0===t?[]:t,s=e.userId,c=Object(n.useRef)();Object(n.useEffect)((function(){c.current.scrollTo(0,c.current.scrollHeight)}));var i=1,l=a.length>0?a.map((function(e){return r.a.createElement(rt,{key:i++,item:e,userId:s})})):r.a.createElement(st,{type:"warning"},"\u0427\u0430\u0442 \u043f\u0443\u0441\u0442! \u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043e\u0431\u0449\u0435\u043d\u0438\u0435...");return r.a.createElement("div",{className:"messages",ref:c},l)},it=a(23),lt=a(128),ut=(a(300),a(301),function(e){var t=e.submitMessage,a=e.declareIsTyping,s=void 0===a?function(){}:a,c=e.isTyping,i=void 0===c?{}:c,l=e.avatar,u=Object(n.useState)(""),o=Object(it.a)(u,2),d=o[0],m=o[1],g=Object(n.useState)(!1),p=Object(it.a)(g,2),f=p[0],E=p[1];return r.a.createElement("div",{className:"message-input"},r.a.createElement(tt,{avatar:l}),r.a.createElement("div",{className:"message-input__content"},r.a.createElement("textarea",{name:"text",value:d,onChange:function(e){m(e.target.value),s&&s()},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),r.a.createElement("button",{className:"message-input__smiles-toggle",onClick:function(){E(!f)}},r.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 368 368",space:"preserve"},r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M261.336,226.04c-3.296-2.952-8.36-2.664-11.296,0.624C233.352,245.312,209.288,256,184,256\r c-25.28,0-49.352-10.688-66.04-29.336c-2.952-3.288-8-3.576-11.296-0.624c-3.296,2.944-3.568,8-0.624,11.296\r C125.76,259.368,154.176,272,184,272c29.832,0,58.248-12.64,77.96-34.664C264.904,234.04,264.624,228.984,261.336,226.04z"}),r.a.createElement("path",{d:"M184,0C82.544,0,0,82.544,0,184s82.544,184,184,184s184-82.544,184-184S285.456,0,184,0z M184,352\r c-92.64,0-168-75.36-168-168S91.36,16,184,16s168,75.36,168,168S276.64,352,184,352z"}),r.a.createElement("path",{d:"M248,128c-22.056,0-40,17.944-40,40c0,4.416,3.584,8,8,8c4.416,0,8-3.584,8-8c0-13.232,10.768-24,24-24s24,10.768,24,24\r c0,4.416,3.584,8,8,8c4.416,0,8-3.584,8-8C288,145.944,270.056,128,248,128z"}),r.a.createElement("path",{d:"M144,168c0,4.416,3.584,8,8,8s8-3.584,8-8c0-22.056-17.944-40-40-40c-22.056,0-40,17.944-40,40c0,4.416,3.584,8,8,8\r s8-3.584,8-8c0-13.232,10.768-24,24-24S144,154.768,144,168z"})))))),f?r.a.createElement("div",{className:"message-input__smiles"},r.a.createElement(lt.a,{native:!0,onSelect:function(e){var t=e.native;m(d+t)}})):null),r.a.createElement("div",{className:"message-input__button-wrap"},i.status&&r.a.createElement("span",{className:"message-input__typing"},"".concat(i.writersName," \u043f\u0438\u0448\u0435\u0442")),r.a.createElement("button",{className:"btn btn-primary ml-auto",onClick:function(){t(d),m("")},disabled:""===d},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))}),ot=function(e){var t=e.submitMessage,a=e.messages,n=e.avatar,s=e.userId;return r.a.createElement("div",{className:"messages-wrapper"},r.a.createElement(nt,null),r.a.createElement(ct,{messages:a,userId:s}),r.a.createElement(ut,{submitMessage:t,avatar:n}))},dt=function(e){var t=e.socket,a=e.userId,s=e.avatar,c=e.messages,i=e.deleteUserAC,l=e.setOnlineUsersAC,u=e.pushMessageAC,o=e.clearMessagesAC;Object(n.useEffect)((function(){return t.emit("CHAT:JOIN",{userId:a}),function(){i(t.id),o(),t.disconnect()}}),[a,t,i,o]),Object(n.useEffect)((function(){var e=function(e){var t=e.id;i(t)};t.on("CHAT:DELETE_USER",e);var a=function(e){u(e)};t.on("CHAT:ADD_MESSAGE",a);var n=function(e){var t=e.onlineUsers;l(t)};return t.on("CHAT:PUSH_ONLINE_USERS_ON_CLIENT",n),function(){t.off("CHAT:DELETE_USER",e),t.off("CHAT:ADD_MESSAGE",a),t.off("CHAT:PUSH_ONLINE_USERS_ON_CLIENT",n)}}),[i,u,l,t]);return r.a.createElement(ot,{submitMessage:function(e){t.emit("CHAT:SEND_MESSAGE",{userId:a,text:e})},messages:c,avatar:s,userId:a})},mt=Object(i.b)((function(e){return{userId:e.auth.userId,avatar:e.auth.avatar,messages:e.chatPage.messages,nickname:e.auth.nickname}}),(function(e){return Object(d.b)({deleteUserAC:ne,setOnlineUsersAC:ae,pushMessageAC:$,clearMessagesAC:ee},e)}))((function(e){return e.nickname?r.a.createElement(dt,e):r.a.createElement(st,{type:"danger"},'\u0414\u043b\u044f \u0432\u0445\u043e\u0434\u0430 \u0432 \u0447\u0430\u0442 \u043d\u0443\u0436\u043d\u043e \u0438\u043c\u0435\u0442\u044c \u043d\u0438\u043a\u043d\u044d\u0439\u043c. \u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043d\u0438\u043a\u043d\u044d\u0439\u043c \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 "\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438".')})),gt=function(){var e=et();return r.a.createElement(mt,{socket:e})},pt=Object(n.createContext)(),ft=(a(302),a(303),a(304),function(){var e=Object(n.useContext)(pt),t=e.searchField,a=e.setSearchFieldAC,s=e.setViewSearchWindowAC;return r.a.createElement("div",{className:"input-group input-group-default"},r.a.createElement("input",{placeholder:"\u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u0441\u043e\u0431\u0435\u0441\u0435\u0434\u043d\u0438\u043a\u0430 \u043f\u043e email",type:"text",className:"form-control",value:t,onChange:function(e){return a(e.target.value)},onFocus:function(){s(!0)}}))}),Et=function(e){var t=e.item,a=Object(n.useContext)(pt),s=a.selectedNewId,c=a.setSelectedNewIdAC;return r.a.createElement("li",null,r.a.createElement("label",{htmlFor:t.partnerId},r.a.createElement(tt,{small:!0,avatar:t.avatar,alt:t.email}),r.a.createElement("span",null,t.email),r.a.createElement("input",{id:t.partnerId,name:"checkDialog",type:"radio",value:t.partnerId,checked:s===t.partnerId,onChange:function(e){return c(e.target.value)}})))},vt=function(){var e=Object(n.useContext)(pt),t=e.loading,a=e.firstMessage,s=e.selectedNewId,c=e.setFirstMessageAC,i=e.createDialog;return r.a.createElement("div",{className:"found__new-message"},r.a.createElement("textarea",{placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",name:"newMessage",value:a,onChange:function(e){c(e.target.value)},disabled:!(!t&&s)}),r.a.createElement("button",{onClick:function(){return i(s,a)},disabled:!(!t&&s&&a.length>0),className:"dialogs__button text-center",type:"button"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"))},ht=function(e){var t=Object(n.useContext)(pt),a=t.token,s=t.loading,c=t.viewSearchWindow,i=t.searchField,l=t.foundUsers,u=t.findUsersThunk,o=t.setViewSearchWindowAC;return r.a.createElement("div",{className:"dialogs__found ".concat(c?"dialogs__found_active":"")},r.a.createElement("button",{className:"dialogs__button dialogs__button_search",disabled:!(i.length>=3),onClick:function(){return u(a,i)}},"\u0418\u0441\u043a\u0430\u0442\u044c"),r.a.createElement("button",{className:"dialogs__button",type:"button",onClick:function(){o(!1)}},r.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 447.243 447.243",space:"preserve"},r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M420.361,192.229c-1.83-0.297-3.682-0.434-5.535-0.41H99.305l6.88-3.2c6.725-3.183,12.843-7.515,18.08-12.8l88.48-88.48c11.653-11.124,13.611-29.019,4.64-42.4c-10.441-14.259-30.464-17.355-44.724-6.914c-1.152,0.844-2.247,1.764-3.276,2.754l-160,160C-3.119,213.269-3.13,233.53,9.36,246.034c0.008,0.008,0.017,0.017,0.025,0.025l160,160c12.514,12.479,32.775,12.451,45.255-0.063c0.982-0.985,1.899-2.033,2.745-3.137c8.971-13.381,7.013-31.276-4.64-42.4l-88.32-88.64c-4.695-4.7-10.093-8.641-16-11.68l-9.6-4.32h314.24c16.347,0.607,30.689-10.812,33.76-26.88C449.654,211.494,437.806,195.059,420.361,192.229z"})))),"\u041d\u0430\u0437\u0430\u0434 \u043a \u0434\u0438\u0430\u043b\u043e\u0433\u0430\u043c"),r.a.createElement("div",{className:"found-dialogs"},l.length?r.a.createElement("ul",{className:"found-dialogs__list"},l.map((function(e){return r.a.createElement(Et,{key:e.partnerId,item:e})}))):s?r.a.createElement(De,null):i.length?r.a.createElement(st,{type:"warning"},"\u041d\u0438\u043a\u043e\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"):r.a.createElement(st,{type:"warning"},"\u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u0441\u043e\u0431\u0435\u0441\u0435\u0434\u043d\u0438\u043a\u0430 \u043f\u043e email"),r.a.createElement(vt,null)))},bt=function(){return r.a.createElement("div",{className:"dialogs__search"},r.a.createElement(ft,null),r.a.createElement(ht,null))},Nt=(a(305),function(e){var t=e.item,a=Object(n.useContext)(pt),s=a.selectedDialog,c=a.selectDialog;return r.a.createElement("li",{className:"dialogs__item ".concat(t.id===s?"dialogs__item_active":""),onClick:function(){return c(t.id,t.participants)}},r.a.createElement(tt,{isDialog:!0,isOnline:t.isOnline,small:"true",avatar:t.avatar,alt:t.email}),r.a.createElement("div",{className:"dialog"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between"},r.a.createElement("span",{className:"dialog__email"},t.email),r.a.createElement("span",{className:"dialog__updated"},t.date)),r.a.createElement("span",{className:"dialog__message ".concat(t.my?t.unreadMessages?"dialog__message_my-unread":"dialog__message_my-read":"")},t.text.length>20?"".concat(t.text.substring(0,20),"..."):t.text)),t.unreadMessages>0&&!t.my&&r.a.createElement("div",{className:"dialog__new-messages"},r.a.createElement("span",null,t.unreadMessages)))}),St=function(e){var t=e.dialogWindowStatus,a=Object(n.useContext)(pt),s=a.dialogs,c=a.loading;return r.a.createElement("div",{className:"dialogs ".concat(t?"dialogs_mobile-active":"")},r.a.createElement(bt,null),s.length?r.a.createElement("ul",{className:"dialogs__list"},s.map((function(e){return r.a.createElement(Nt,{key:e.id,item:e})}))):c?r.a.createElement(De,null):r.a.createElement(st,{type:"warning"},"\u0414\u0438\u0430\u043b\u043e\u0433\u043e\u0432 \u043d\u0435\u0442\u0443. \u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u0441\u043e\u0431\u0435\u0441\u0435\u0434\u043d\u0438\u043a\u0430."))},_t=function(e){var t=Object(n.useContext)(pt),a=t.loading,s=t.selectedDialog,c=Object(n.useState)(!1),i=Object(it.a)(c,2),l=i[0],u=i[1],o=e.messagesProps,d=o.messages,m=o.userId,g=o.submitMessage,p=o.avatar,f=o.declareIsTyping,E=o.isTyping;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-3 pl-0 pr-0"},r.a.createElement("button",{className:"btn btn-primary w-100 dialogs-toggler",onClick:function(){u(!l)}},l?s&&s.length>0?"\u0421\u043a\u0440\u044b\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a (\u0434\u0438\u0430\u043b\u043e\u0433 \u043e\u0442\u043a\u0440\u044b\u0442)":"\u0421\u043a\u0440\u044b\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a":"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432"),r.a.createElement(St,{dialogWindowStatus:l})),r.a.createElement("div",{className:"col-12 col-lg-9 pl-0 pr-0 pl-lg-2 m-0 messages-wrapper w-auto"},s&&d.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(ct,{messages:d,userId:m}),r.a.createElement(ut,{isTyping:E,declareIsTyping:f,submitMessage:g,avatar:p})):r.a.createElement("div",{className:"messages-plug text-center"},a?r.a.createElement(De,null):r.a.createElement(st,{type:"warning"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0431\u0435\u0441\u0435\u0434\u043d\u0438\u043a\u0430"))))},wt=function(e,t,a){var n=a.filter((function(e){return e.id===t}))[0].participants;return n.author._id===e?n.partner:n.author},Ot=Object(i.b)((function(e){return{loading:e.dialogsPage.loading,firstMessage:e.dialogsPage.firstMessage,foundUsers:e.dialogsPage.foundUsers,selectedNewId:e.dialogsPage.selectedNewId,searchField:e.dialogsPage.searchField,dialogs:e.dialogsPage.dialogs,viewSearchWindow:e.dialogsPage.viewSearchWindow,selectedDialog:e.dialogsPage.selectedDialog,isTyping:e.dialogsPage.isTyping,messages:e.dialogsPage.messages,userId:e.auth.userId,avatar:e.auth.avatar,token:e.auth.token,nickname:e.auth.nickname,email:e.auth.email}}),(function(e){return Object(d.b)({setViewSearchWindowAC:me,setSearchFieldAC:ge,setSelectedNewIdAC:pe,setFirstMessageAC:fe,pushToMessagesThunk:Te,setSelectedDialogAC:Ee,updateReadstatusAC:be,setMessagesAC:he,setIsTypingAC:Ne,getDialogsThunk:_e,getMessagesFromDialogThunk:we,findUsersThunk:Ae,sendMessageThunk:Oe,updateDialogThunk:ke,createDialogThunk:Se},e)}))((function(e){var t=e.socket,a=e.dialogs,s=e.loading,c=e.selectedDialog,i=e.setSelectedDialogAC,l=e.searchField,u=e.viewSearchWindow,o=e.foundUsers,d=e.selectedNewId,m=e.firstMessage,g=e.isTyping,p=e.setSearchFieldAC,f=e.setViewSearchWindowAC,E=e.setSelectedNewIdAC,v=e.setFirstMessageAC,h=e.pushToMessagesThunk,b=e.updateReadstatusAC,N=e.setMessagesAC,S=e.setIsTypingAC,_=e.getDialogsThunk,w=e.getMessagesFromDialogThunk,O=e.findUsersThunk,k=e.sendMessageThunk,T=e.updateDialogThunk,A=e.createDialogThunk,I=e.messages,x=e.userId,y=e.avatar,C=e.nickname,j=e.email,D=e.token,U=Object(n.useCallback)((function(e){e.partnerId===x&&(clearInterval(window.setIsTypingTimer),S({status:!0,writersName:e.writersName}),window.setIsTypingTimer=setTimeout((function(){S({status:!1,writersName:""})}),2e3))}),[S,x]);Object(n.useEffect)((function(){return _(D,x),t.emit("DIALOGS:JOIN",{userId:x}),function(){N([]),i(""),t.disconnect()}}),[_,N,i,D,x,t]),Object(n.useEffect)((function(){t.on("DIALOGS:ADD_MESSAGE",(function(e){h(e.message),_(D,x)})),t.on("DIALOGS:MESSAGES_READED",(function(e){b(e.dialogId)})),t.on("DIALOGS:UPDATE_DIALOGS",(function(){_(D,x)})),t.on("DIALOGS:SET_IS_TYPING",(function(e){U(e)}))}),[h,_,T,b,U,N,D,x,t]);var M={userId:x,token:D,dialogs:a,loading:s,selectedDialog:c,searchField:l,viewSearchWindow:u,foundUsers:o,selectedNewId:d,firstMessage:m,isTyping:g,setSearchFieldAC:p,setViewSearchWindowAC:f,setSelectedNewIdAC:E,setFirstMessageAC:v,findUsersThunk:O,createDialog:function(e,a){A(D,x,e,a).then((function(){_(D,x),N([]),i(""),t.emit("DIALOGS:CREATED_DIALOG",{partnerId:e})}))},selectDialog:function(e,a){t.emit("DIALOGS:LEAVE_FROM_DIALOG",{dialogId:c}),t.emit("DIALOGS:JOIN_TO_DIALOG",{dialogId:e}),i(e),w(D,e,a)}},F={userId:x,avatar:y,messages:I,submitMessage:function(e){var n=wt(x,c,a),r={userId:x,avatar:y,nickname:C,email:j};k(D,c,e).then((function(){t.emit("DIALOGS:SEND_MESSAGE_TO_DIALOG",{user:r,text:e,dialogId:c,partnerId:n._id})}))},declareIsTyping:function(){var e=wt(x,c,a),n=wt(e._id,c,a);t.emit("DIALOGS:IS_TYPING",{writersName:n.nickname||n.email,partnerId:e._id,dialogId:c})},isTyping:g};return r.a.createElement(pt.Provider,{value:M},r.a.createElement(_t,{messagesProps:F}))})),kt=function(){var e=et();return r.a.createElement(Ot,{socket:e})},Tt=(a(306),function(e){var t=e.token,a=e.email,n=e.nickname,s=e.avatar,c=e.changeHandler,i=e.updateSettingsThunk,l=e.deleteAccThunk;return r.a.createElement("div",{className:"settings mt-3"},r.a.createElement("ul",{className:"list-group list-group--emptyborder"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(ze,{caption:"Email",value:a||"",name:"email",readonly:!0})),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(ze,{caption:"\u041d\u0438\u043a\u043d\u044d\u0439\u043c",handler:c,value:n||"",name:"nickname"})),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(ze,{caption:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",handler:c,value:s||"",name:"avatar"})),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("button",{onClick:function(){return i({token:t,nickname:n,avatar:s})},className:"btn btn-primary float-right"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("button",{onClick:function(){return l({token:t})},className:"btn btn-sm btn-danger"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442"))))}),At=Object(i.b)((function(e){return{token:e.auth.token,email:e.auth.email,nickname:e.auth.nickname,avatar:e.auth.avatar}}),(function(e){return Object(d.b)({setSettingsAC:C,updateSettingsThunk:M,deleteAccThunk:U},e)}))((function(e){var t=e.token,a=e.email,n=e.nickname,s=e.avatar,c=e.setSettingsAC,i=e.updateSettingsThunk,l=e.deleteAccThunk;return r.a.createElement(Tt,{token:t,email:a,nickname:n,changeHandler:function(e){c(e.target.name,e.target.value)},updateSettingsThunk:i,deleteAccThunk:l,avatar:s})})),It=function(){return r.a.createElement(At,null)},xt=function(e){return e?r.a.createElement(je.d,null,r.a.createElement(je.b,{path:"/todo",exact:!0},r.a.createElement(Ye,null)),r.a.createElement(je.b,{path:"/chat",exact:!0},r.a.createElement(gt,null)),r.a.createElement(je.b,{path:"/settings",exact:!0},r.a.createElement(It,null)),r.a.createElement(je.b,{path:"/dialogs",exact:!0},r.a.createElement(kt,null)),r.a.createElement(je.a,{to:"/todo"})):r.a.createElement(je.d,null,r.a.createElement(je.b,{path:"/auth",exact:!0},r.a.createElement(Xe,null)),r.a.createElement(je.a,{to:"/auth"}))},yt=(a(308),Object(i.b)(null,(function(e){return Object(d.b)({setAuthAC:x},e)}))((function(e){var t=e.setAuthAC,a=Object(n.useState)(!1),s=Object(it.a)(a,2),c=s[0],i=s[1],u=T();return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("span",{className:"navbar-brand"},"Notes"),r.a.createElement("button",{className:"navbar-toggler",type:"button",onClick:function(){i(!c)}},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse ".concat(c&&"active"),id:"navbarNavAltMarkup"},r.a.createElement("div",{className:"navbar-nav ml-auto"},r.a.createElement(l.b,{className:"nav-item nav-link",to:"/dialogs"},"\u0414\u0438\u0430\u043b\u043e\u0433\u0438"),r.a.createElement(l.b,{className:"nav-item nav-link",to:"/chat"},"\u0427\u0430\u0442"),r.a.createElement(l.b,{className:"nav-item nav-link",to:"/todo"},"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"),r.a.createElement(l.b,{className:"nav-item nav-link",to:"/settings"},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),r.a.createElement("a",{className:"nav-item nav-link",href:"/",onClick:function(e){e.preventDefault(),u.deleteUser(),t({})}},"\u0412\u044b\u0439\u0442\u0438"))))}))),Ct=Object(i.b)((function(e){return{isAuth:e.auth.isAuth}}),null)((function(e){var t=e.isAuth,a=xt(t),n=t?r.a.createElement(yt,null):null;return r.a.createElement("div",{className:"main-container main-container_dark"},n,r.a.createElement("div",{className:"container"},a),r.a.createElement(E.a,null))}));c.a.render(r.a.createElement(l.a,null,r.a.createElement(i.a,{store:Ce},r.a.createElement(Ct,null))),document.getElementById("root"))}},[[129,1,2]]]);
//# sourceMappingURL=main.4389ba7f.chunk.js.map