(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{34:function(e,t,a){e.exports=a(53)},39:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},48:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),l=(a(39),a(9),a(19)),s=a(11),u=a(3),i=a.n(u),m=(a(41),function(e){var t=e.text;return r.a.createElement("h1",{className:"text-center"},t)}),p=Object(n.createContext)(),d=function(){var e=Object(n.useContext)(p),t=e.setSearch,a=e.search;return r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Search")),r.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){t(e.target.value)},value:a}))},b=function(){var e=Object(n.useContext)(p),t=e.filter,a=e.setFilter,c=[{name:"all",label:"All"},{name:"active",label:"Active"},{name:"done",label:"Done"}].map((function(e){var n=e.name,c=e.label,o="btn btn-dark"+(t===n?" active":"");return r.a.createElement("button",{key:n,className:o,onClick:function(e){t!==n&&a(n)}},c)}));return r.a.createElement("div",{className:"btn-group mb-3"},c)},v=function(){return r.a.createElement("div",{className:"navigation-panel d-flex"},r.a.createElement(d,null),r.a.createElement(b,null))},f=a(13),g=a(10),E=a(5),N=(a(42),a(26)),h=a(17),x=function(e){var t=e.text,a=e.important,c=e.done,o=e.itemId,l=Object(n.useContext)(p),s=l.pushUpdateNote,u=l.deleteNote,i=Object(n.useState)({important:a,done:c}),m=Object(E.a)(i,2),d=m[0],b=m[1],v=d.important?"active":"",x=d.done?"doneItem":"",O=function(e){var t=Object(g.a)({},d,Object(f.a)({},e.target.name,!d[e.target.name]));b(t),s(o,t)},k=[{name:"important",classNames:"btn btn-primary",onClickFunction:O,fontAwesomeIcon:h.b},{name:"done",classNames:"btn btn-success btn-done",onClickFunction:O,fontAwesomeIcon:h.a},{classNames:"btn btn-danger",onClickFunction:function(){u(o)},fontAwesomeIcon:h.c}].map((function(e,t){return r.a.createElement("button",{name:e.name,type:"button",className:e.classNames,key:t,onClick:e.onClickFunction},r.a.createElement(N.a,{icon:e.fontAwesomeIcon}))}));return r.a.createElement("li",{className:"list-group-item list-group-item--custom ".concat(v," ").concat(x)},t,r.a.createElement("div",{className:"float-right buttons-wrap"},k))},O=function(){var e=Object(n.useState)(!1),t=Object(E.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),o=Object(E.a)(c,2),l=o[0],s=o[1];return{loading:a,error:l,request:Object(n.useCallback)((function(e){var t,a,n,c,o,l=arguments;return i.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:"GET",a=l.length>2?l[2]:void 0,n=l.length>3&&void 0!==l[3]?l[3]:{},r(!0),u.prev=4,a&&(a=JSON.stringify(a),n["Content-Type"]="application/json"),u.next=8,i.a.awrap(fetch(e,{method:t,body:a,headers:n}));case 8:return c=u.sent,u.next=11,i.a.awrap(c.json());case 11:if(o=u.sent,c.ok){u.next=15;break}throw r(!1),new Error(o.message||"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0435 \u043f\u0440\u043e\u0448\u0435\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e...");case 15:return r(!1),u.abrupt("return",o);case 19:u.prev=19,u.t0=u.catch(4),r(!1),s(u.t0);case 23:case"end":return u.stop()}}),null,null,[[4,19]])}),[]),cleanError:function(){return s(null)}}},k=(a(48),function(){return r.a.createElement("div",{className:"lds-css"},r.a.createElement("div",{className:"lds-double-ring"},r.a.createElement("div",null),r.a.createElement("div",null)))}),j=function(){var e=O().loading,t=Object(n.useContext)(p),a=t.notes,c=t.onSearch,o=(0,t.onFilter)(c(a));return r.a.createElement("div",{className:"list-container mb-3"},e?r.a.createElement(k,null):0===o.length?r.a.createElement("span",null,"\u0421\u043f\u0438\u0441\u043a\u0430 \u043d\u0435\u0442"):r.a.createElement("ul",{className:"list-group"},o.map((function(e,t){var a=e._id,n=e.text,c=e.important,o=e.done;return r.a.createElement(x,{text:n,important:c,done:o,key:a,itemId:a})}))))},w=function(){var e=O().loading,t=Object(n.useContext)(p),a=t.newItem,c=t.setNewItem,o=t.addNote,l=!!e||""===a;return r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"New item")),r.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){c(e.target.value)},value:a,name:"newItem"})),r.a.createElement("button",{type:"submit",className:"btn btn-dark mb-3",disabled:l,onClick:o},"Add"))},S=function(){},y=Object(n.createContext)({userId:null,token:null,ready:!1,login:S,logout:S}),C=function(){var e=Object(n.useContext)(y).token,t=Object(n.useContext)(p).getNotes;return Object(n.useEffect)((function(){i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=3;break}return a.next=3,i.a.awrap(t());case 3:case"end":return a.stop()}}))}),[e,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m,{text:"Welcome to my TodoList App"}),r.a.createElement(v,null),r.a.createElement(j,null),r.a.createElement(w,null))},I=a(23),A=(a(49),function(){return I.a.configure(),Object(n.useCallback)((function(e){return I.a.info(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}),[])}),F=function(){var e=A(),t=O(),a=t.request,c=t.loading,o=Object(n.useContext)(y).login,l=Object(n.useState)({email:"",password:""}),s=Object(E.a)(l,2),u=s[0],m=s[1],p=function(e){m(Object(g.a)({},u,Object(f.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",className:"form-control",id:"email",name:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",onChange:p})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",name:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440o\u043b\u044c",onChange:p})),r.a.createElement("button",{className:"btn btn-primary mr-3",onClick:function(){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,""===u.email||""===u.password){n.next=7;break}return n.next=4,i.a.awrap(a("/api/auth/login","POST",Object(g.a)({},u)));case 4:t=n.sent,o(t.userId,t.token),e(t.message);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),null,null,[[0,9]])},disabled:c},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,""===u.email||""===u.password){n.next=6;break}return n.next=4,i.a.awrap(a("/api/auth/register","POST",Object(g.a)({},u)));case 4:t=n.sent,e(t.message);case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),null,null,[[0,8]])},disabled:c},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))},T=function(e){return e?r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/todo",exact:!0},r.a.createElement(C,null)),r.a.createElement(s.a,{to:"/todo"})):r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0},r.a.createElement(F,null)),r.a.createElement(s.a,{to:"/"}))},P=function(){var e=Object(n.useState)(!1),t=Object(E.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),o=Object(E.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(null),i=Object(E.a)(u,2),m=i[0],p=i[1],d=function(e,t,a){s(e),p(t),localStorage.setItem("userStorage",JSON.stringify({userId:e,token:t,exp:a||Date.now()+36e5}))},b=function(){s(null),p(null),localStorage.removeItem("userStorage")},v=Object(n.useCallback)((function(){var e=JSON.parse(localStorage.getItem("userStorage"));e&&e.token&&(Date.now()>e.exp?b():d(e.userId,e.token,e.exp));r(!0)}),[]);Object(n.useEffect)((function(){v()}),[v]);var f=Object(n.useCallback)((function(){return JSON.parse(localStorage.getItem("userStorage")).token}),[]);return{login:d,logout:b,userId:l,token:m,ready:a,getToken:f}},L=a(29),M=a(30),q=a(32),B=a(31),J=a(33),D=(a(52),function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(q.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).logouHandler=function(e){e.preventDefault(),(0,a.context.logout)()},a.toggleMenu=function(){document.querySelector(".collapse.navbar-collapse").classList.toggle("active")},a}return Object(J.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){var e=document.querySelector(".navbar-toggler");e&&e.addEventListener("click",this.toggleMenu)}},{key:"componentWillUnmount",value:function(){var e=document.querySelector(".navbar-toggler");e&&e.removeEventListener("click",this.toggleMenu)}},{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("span",{className:"navbar-brand"},"Notes"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},r.a.createElement("div",{className:"navbar-nav ml-auto"},r.a.createElement("a",{className:"nav-item nav-link",href:"/",onClick:this.logouHandler},"Logout"))))}}]),t}(n.Component));D.contextType=y;var U=function(){var e=P(),t=e.login,a=e.logout,c=e.userId,o=e.token,s=e.ready,u=function(){var e=Object(n.useState)([]),t=Object(E.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),o=Object(E.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(""),m=Object(E.a)(u,2),p=m[0],d=m[1],b=Object(n.useState)("all"),v=Object(E.a)(b,2),f=v[0],N=v[1],h=O().request,x=P().getToken,k=A(),j=Object(n.useCallback)((function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.awrap(h("/api/note/","POST",null,{Authorization:"Bearer ".concat(x())}));case 3:(e=t.sent)&&r(e.notes),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.response);case 10:case"end":return t.stop()}}),null,null,[[0,7]])}),[h,x]);return{addNote:function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.awrap(h("/api/note/add","POST",{text:l},{Authorization:"Bearer ".concat(x())}));case 3:if(!(e=t.sent)){t.next=9;break}return k(e.message),t.next=8,i.a.awrap(j());case 8:s("");case 9:t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),null,null,[[0,11]])},newItem:l,setNewItem:s,getNotes:j,notes:a,setNotes:r,deleteNote:function(e){var t;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,i.a.awrap(h("/api/note/delete","POST",{itemId:e},{Authorization:"Bearer ".concat(x())}));case 3:if(!(t=a.sent)){a.next=8;break}return k(t.message),a.next=8,i.a.awrap(j());case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),null,null,[[0,10]])},pushUpdateNote:function(e,t){var a;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.awrap(h("/api/note/update","POST",Object(g.a)({itemId:e},t),{Authorization:"Bearer ".concat(x())}));case 3:if(!(a=n.sent)){n.next=8;break}return k(a.message),n.next=8,i.a.awrap(j());case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),null,null,[[0,10]])},search:p,setSearch:d,onSearch:function(e){return""===p?e:e.filter((function(e){return!1!==e.text.toLowerCase().includes(p.toLowerCase())}))},filter:f,onFilter:function(e){switch(f){case"all":return e;case"active":return e.filter((function(e){return!0!==e.done}));case"done":return e.filter((function(e){return!0===e.done}))}},setFilter:N}}(),m=u.addNote,d=u.newItem,b=u.setNewItem,v=u.notes,f=u.setNotes,N=u.getNotes,h=u.deleteNote,x=u.pushUpdateNote,j=u.search,w=u.setSearch,S=u.onSearch,C=u.filter,I=u.onFilter,F=u.setFilter,L=T(!!o);return s?r.a.createElement(l.a,null,r.a.createElement(y.Provider,{value:{login:t,logout:a,userId:c,token:o,ready:s}},r.a.createElement(p.Provider,{value:{addNote:m,newItem:d,setNewItem:b,notes:v,setNotes:f,getNotes:N,deleteNote:h,pushUpdateNote:x,search:j,setSearch:w,onSearch:S,filter:C,onFilter:I,setFilter:F}},o?r.a.createElement(D,null):null,r.a.createElement("div",{className:"main-container main-container--dark-bg"},r.a.createElement("div",{className:"container container--custom"},L))))):r.a.createElement(k,null)};o.a.render(r.a.createElement(U,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.9593398f.chunk.js.map